# Builtin Toolchains

Occlum provides multiple builtin toolchains or libraries in the Occlum development docker image to ease the porting or developing effort for users. Part of them are toolchains used to recompile or repackage the applications to make them runnable in Occlum TEE environment. The others are some frequently-used auxiliary libraries which can be directly used or linked by applications running in Occlum.

All the build scripts could be found on [`github`](https://github.com/occlum/occlum/tree/master/tools/toolchains).

## Toolchains

### glibc

To support running glibc based application in Occlum, a customized [`glibc`](https://github.com/occlum/glibc) is provided in the Occlum development docker image.

|    libc   |  Compatible Version in Occlum  | Path in Occlum Docker Image |
| --------- | ------------------------------ | --------------------------- |
|   glibc   | <=2.31<br>(default version in Ubuntu:20.04)  |  /opt/occlum/glibc/lib/ |

The main changes on top of general glibc are as below:

* Redirect syscalls into Occlum
* Support posix_spawn syscall for Occlum
* Modify vdso to calling syscalls in Occlum

To users, all the glibc libraries to be used in Occlum need to be replaced by the ones in ```/opt/occlum/glibc/lib/```.

Thus, Occlum can support `gcc` compilation with **PIE** enabled, which make it compatible to popular compile systems.

### golang
 
To support compiling and running Golang in Occlum LibOS, a customized [`go`](https://github.com/occlum/go) is provided in the Occlum development docker image, path `/opt/occlum/toolchains/golang`.

Currently Occlum supports two versions of Golang, 1.16 and 1.18 (default one in Occlum development docker image) which are both linked to musl-libc.

Thus, every Golang to be executed in Occlum needs to be recompiled by **occlum-go** (a wrapper of go).

### java

### musl-gcc

To support compiling and running musl-libc based application in Occlum, a customized [`musl`](https://github.com/occlum/musl) is provided in the Occlum development docker image.

|    libc   |  Compatible Version in Occlum  | Path in Occlum Docker Image |
| --------- | ------------------------------ | --------------------------- |
| musl libc | <=1.1.24<br>(default version in Alpine:3.11) | /usr/local/occlum/x86_64-linux-musl/lib/ |

To users, all the musl-libc libraries to be used in Occlum need to be replaced by the ones in ```/usr/local/occlum/x86_64-linux-musl/lib/```.

Moreover, wrapped **occlum-gcc**, **occlum-g++** and **occlum-ld** are provided as well to do the recompiling if necessary. Any applications generated by these wrapped tools, are expected to run successfully in Occlum.

### rust

## Auxiliary Libraries

### bash

### busybox

### DCAP library

